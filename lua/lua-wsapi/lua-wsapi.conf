# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../lua-wsapi/lua-wsapi.conf
# Copyright (C) 2008 - 2013 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- SDE-COPYRIGHT-NOTE-END ---

runconf=0

pkgprefix -t lua

hook_add premake 5 'lua_wsapi_config'
lua_wsapi_config() {
cat <<-EOF > config
	LIB_OPTION= -shared
	BIN_DIR=$root$(pkgprefix bindir lua)
	LUA_DIR=$root$luadatadir
	LUA_LIBDIR=$root$lualibdir
	EOF
}

# remove prebuilt binary (can be removed when updating to version 1.6)
hook_add premake 5 'rm -f src/fastcgi/lfcgi.so'

var_append makeinstopt ' ' 'install-fcgi'

hook_add postmake 5 'cp -a doc samples $root$docdir/'
