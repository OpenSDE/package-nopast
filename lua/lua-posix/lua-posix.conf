# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../lua-posix/lua-posix.conf
# Copyright (C) 2011 - 2013 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- SDE-COPYRIGHT-NOTE-END ---

# we need to include our own snapshot of gnulib because it is not included,
# and if it is not detected, the bootstrap script will try to clone the
# remote git repository of gnulib :/
# see: https://github.com/luaposix/luaposix/issues/106
untar_gnulib_snapshot() {
	local gnulib_srctar=$( match_source_file -p gnulib )
	tar -xjf $gnulib_srctar
}
hook_add preconf 1 'untar_gnulib_snapshot'

# before being able to run configure we need to run the marvelous gnulib
# bootstrap script
hook_add preconf 9 './bootstrap --gnulib-srcdir=./gnulib'

# make sure modules end up in the right locations
libdir=$lualibdir
datadir=$luadatadir
