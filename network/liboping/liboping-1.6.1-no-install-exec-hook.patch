# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../liboping/liboping-1.6.1-no-install-exec-hook.patch
# Copyright (C) 2011 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- SDE-COPYRIGHT-NOTE-END ---

Description: Do not run install-exec-hook target avoiding the call of setcap

TODO:

We need to set the capabilities inside of a postinstall script, because
it is not guaranteed that it is allowed to use setcap on any build host.

install-exec-hook:
        @if test "x0" = "x$$UID"; then \
                if test "xLinux" = "x`uname -s`"; then \
                        echo "Setting CAP_NET_RAW capability on binaries."; \
                        setcap cap_net_raw=ep $(DESTDIR)$(bindir)/oping; \
                        setcap cap_net_raw=ep $(DESTDIR)$(bindir)/noping; \
                else \
                        echo "Setting set-UID bit on binaries."; \
                        chmod u+s $(DESTDIR)$(bindir)/oping; \
                        chmod u+s $(DESTDIR)$(bindir)/noping; \
                fi; \
        fi

--- liboping-1.6.1/src/Makefile.in.orig	2011-04-20 15:30:38.844077820 +0200
+++ liboping-1.6.1/src/Makefile.in	2011-04-20 15:33:55.932078104 +0200
@@ -743,7 +743,7 @@
 
 install-exec-am: install-binPROGRAMS install-libLTLIBRARIES
 	@$(NORMAL_INSTALL)
-	$(MAKE) $(AM_MAKEFLAGS) install-exec-hook
+	$(MAKE) $(AM_MAKEFLAGS)
 install-html: install-html-recursive
 
 install-html-am:
