# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../ulogd/ulogd.conf
# Copyright (C) 2013 - 2014 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- SDE-COPYRIGHT-NOTE-END ---

# regenerate autotools infrastructure to not depend on a particular version
hook_add preconf 5 'autoreconf -vfi'

prefix=
set_confopt

# database output plugin support
tuples="postgresql:pgsql mysql:mysql libdbi:dbi"
for tuple in $tuples; do
	tuplepkg=${tuple%:*}
	tupledb=${tuple#*:}

	if pkginstalled -f $tuplepkg; then
		var_append extraconfopt ' ' "--with-$tupledb=$( pkgprefix -r $tuplepkg )"
		var_append extraconfopt ' ' "--with-$tupledb-inc=$( pkgprefix -r includedir $tuplepkg )"
		var_append extraconfopt ' ' "--with-$tupledb-lib=$( pkgprefix -r libdir $tuplepkg )"
	else
		var_append extraconfopt ' ' "--without-$tupledb"
	fi
done
