# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../ssmtp/ssmtp-link-libcrypto.patch
# Copyright (C) 2014 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- SDE-COPYRIGHT-NOTE-END ---

Explicitely link against libcrypto

When cross-compiling following error appears at linking time, which strangely
doesn't when building "natively" within a chrooted environment.
------------------------------------------------------------------------------
/bin/ld: ssmtp.o: undefined reference to symbol 'X509_free'
/bin/ld: note: 'X509_free' is defined in DSO /usr/lib/libcrypto.so.1.0.0 so try adding it to the linker command line
/usr/lib/libcrypto.so.1.0.0: could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status
------------------------------------------------------------------------------

--- a/configure.in
+++ b/configure.in
@@ -52,7 +52,7 @@
 [  --enable-ssl           support for secure connection to mail server])
 if test x$enableval = xyes ; then
 	AC_DEFINE(HAVE_SSL)
-	LIBS="$LIBS -lssl"
+	LIBS="$LIBS -lcrypto -lssl"
 fi
 enableval=""
 
--- a/configure
+++ b/configure
@@ -1562,7 +1562,7 @@
 #define HAVE_SSL 1
 EOF
 
-	LIBS="$LIBS -lssl"
+	LIBS="$LIBS -lcrypto -lssl"
 fi
 enableval=""
 
