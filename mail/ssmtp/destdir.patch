# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../ssmtp/destdir.patch
# Copyright (C) 2007 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- SDE-COPYRIGHT-NOTE-END ---

--- ./Makefile.in.orig	2004-07-26 01:32:18.000000000 -0400
+++ ./Makefile.in	2007-12-18 17:37:58.000000000 -0500
@@ -46,36 +46,36 @@
 
 .PHONY: install
-install: ssmtp $(GEN_CONFIG)
-	$(INSTALL) -d -m 755 $(bindir)
-	$(INSTALL) -s -m 755 ssmtp $(bindir)/ssmtp
-	$(INSTALL) -d -m 755 $(mandir)
-	$(INSTALL) -m 644 $(srcdir)/ssmtp.8 $(mandir)/ssmtp.8
-	$(INSTALL) -d -m 755 $(SSMTPCONFDIR)
-	$(INSTALL) -m 644 $(srcdir)/revaliases $(INSTALLED_REVALIASES_FILE)
-	$(GEN_CONFIG) $(INSTALLED_CONFIGURATION_FILE)
+install: ssmtp
+	$(INSTALL) -d -m 755 $(DESTDIR)$(bindir)
+	$(INSTALL) -s -m 755 ssmtp $(DESTDIR)$(bindir)/ssmtp
+	$(INSTALL) -d -m 755 $(DESTDIR)$(mandir)
+	$(INSTALL) -m 644 $(srcdir)/ssmtp.8 $(DESTDIR)$(mandir)/ssmtp.8
+	$(INSTALL) -d -m 755 $(DESTDIR)$(SSMTPCONFDIR)
+	$(INSTALL) -m 644 $(srcdir)/revaliases $(DESTDIR)$(INSTALLED_REVALIASES_FILE)
+	$(GEN_CONFIG) $(DESTDIR)$(INSTALLED_CONFIGURATION_FILE)
 
 
 .PHONY: install-sendmail
 install-sendmail: install
-	$(RM) $(bindir)/sendmail
-	$(LN_S) ssmtp $(bindir)/sendmail
-	$(INSTALL) -d -m 755 $(libexecdir)
-	$(RM) $(libexecdir)/sendmail
-	$(LN_S) sendmail /lib/sendmail
-	$(RM) $(mandir)/sendmail.8
-	$(LN_S) ssmtp.8 $(mandir)/sendmail.8
+	$(RM) $(DESTDIR)$(bindir)/sendmail
+	$(LN_S) ssmtp $(DESTDIR)$(bindir)/sendmail
+	$(INSTALL) -d -m 755 $(DESTDIR)$(libexecdir)
+	$(RM) $(DESTDIR)$(libexecdir)/sendmail
+	$(LN_S) $(bindir)/sendmail $(DESTDIR)$(libexecdir)/sendmail
+	$(RM) $(DESTDIR)$(mandir)/sendmail.8
+	$(LN_S) ssmtp.8 $(DESTDIR)$(mandir)/sendmail.8
 
 .PHONY: uninstall
 uninstall:
-	$(RM) $(bindir)/ssmtp
-	$(RM) $(mandir)/ssmtp.8
-	$(RM) $(CONFIGURATION_FILE) $(REVALIASES_FILE)
-	$(RM) -r $(SSMTPCONFDIR)
+	$(RM) $(DESTIDR)$(bindir)/ssmtp
+	$(RM) $(DESTDIR)$(mandir)/ssmtp.8
+	$(RM) $(DESTDIR)$(CONFIGURATION_FILE) $(DESTDIR)$(REVALIASES_FILE)
+	$(RM) -r $(DESTDIR)$(SSMTPCONFDIR)
 
 .PHONY: uninstall-sendmail
 uninstall-sendmail: uninstall
-	$(RM)  $(bindir)/sendmail /lib/sendmail
-	$(RM)  $(mandir)/sendmail.8
+	$(RM)  $(DESTDIR)$(bindir)/sendmail $(DESTDIR)$(libexecdir)/sendmail
+	$(RM)  $(DESTDIR)$(mandir)/sendmail.8
 
 # Binaries:
 ssmtp: $(OBJS)
