# vi: set ft=conf :

ACTION!="add", GOTO="drivers_end"

# hotplug
ENV{MODALIAS}=="?*",	RUN{ignore_error}+="/sbin/modprobe $env{MODALIAS}"

SUBSYSTEM=="pnp", ENV{MODALIAS}!="?*", RUN{ignore_error}+="/bin/sh -c 'while read id; do /sbin/modprobe pnp:d$$id; done < /sys$devpath/id'"

SUBSYSTEM=="tifm", RUN+="/sbin/modprobe --all tifm_sd tifm_ms"

# scsi
SUBSYSTEM=="scsi",		ACTION=="add", ATTRS{type}=="0", RUN+="/sbin/modprobe sd_mod"

SUBSYSTEM=="scsi_device",	ACTION=="add", ATTRS{type}=="0|7|14", RUN+="/sbin/modprobe sd_mod"
SUBSYSTEM=="scsi_device",	ACTION=="add", ATTRS{type}=="1", ATTR{vendor}=="On[sS]tream", RUN+="/sbin/modprobe osst"
SUBSYSTEM=="scsi_device",	ACTION=="add", ATTRS{type}=="1", RUN+="/sbin/modprobe st"
SUBSYSTEM=="scsi_device",	ACTION=="add", ATTRS{type}=="[45]", RUN+="/sbin/modprobe sr_mod"
SUBSYSTEM=="scsi_device",	ACTION=="add", TEST!="[module/sg]", RUN+="/sbin/modprobe sg"

# ide
SUBSYSTEM=="ide", ACTION=="add", ATTR{media}=="tape", RUN+="/sbin/modprobe ide-scsi"

# mmc
SUBSYSTEM=="mmc", ACTION=="add", RUN+="/sbin/modprobe mmc_block"

LABEL="drivers_end"
