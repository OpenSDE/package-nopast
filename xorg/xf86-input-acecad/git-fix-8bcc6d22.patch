From: Alan Coopersmith <alan.coopersmith@sun.com>
Date: Wed, 29 Aug 2007 00:31:54 +0000 (-0700)
Subject: Make compatible with new input ABI
X-Git-Url: http://gitweb.freedesktop.org/?p=xorg/driver/xf86-input-acecad.git;a=commitdiff;h=8bcc6d22889cc40c6b7d1582f87d4b2a816167ab

Make compatible with new input ABI
---

--- a/src/acecad.c
+++ b/src/acecad.c
@@ -70,6 +70,12 @@
 #endif
 #endif
 
+/* Previously found in xf86Xinput.h */
+#ifdef DBG
+#undef DBG
+#endif
+#define DBG(lvl, f) {if ((lvl) <= xf86GetVerbosity()) f;}
+
 /*****************************************************************************
  *	Local Headers
  ****************************************************************************/
@@ -349,7 +355,9 @@ AceCadPreInit(InputDriverPtr drv, IDevPt
     local->name = dev->identifier;
     local->type_name = "ACECAD Tablet";
     local->flags = XI86_POINTER_CAPABLE | XI86_SEND_DRAG_EVENTS;
+#if GET_ABI_MAJOR(ABI_XINPUT_VERSION) == 0
     local->motion_history_proc = xf86GetMotionEvents;
+#endif
     local->control_proc = NULL;
     local->close_proc = CloseProc;
     local->switch_mode = NULL;
