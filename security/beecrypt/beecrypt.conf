# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../beecrypt/beecrypt.conf
# Copyright (C) 2013 - 2014 The OpenSDE Project
# Copyright (C) 2004 - 2006 The T2 SDE Project
#
# More information can be found in the files COPYING and README.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- SDE-COPYRIGHT-NOTE-END ---

# checking if we've Java support for enabling beecrypt's Java API
if [ "$JAVAHOME" ]; then
	var_append confopt " " "--with-java"
else
	var_append confopt " " "--without-java"
fi

# C++ wrapper depends on icu4c
if ! pkginstalled -f icu4c; then
	var_append extraconfopt ' ' "--without-cplusplus"
fi

if ! pkginstalled -f python; then
	var_append extraconfopt ' ' "--without-python"
else
	if atstage cross; then
		# Note: $pyver is exported through python's parse-config
		# use the right Python.h
		var_append configcache ' ' "ac_cv_python_include=-I$( pkgprefix -r includedir python)/python${pyver}"
		# Note: intentionally no $root is used because libtool
		# 	will inject it on install!
		var_append configcache ' ' "ac_cv_python_libdir=$( pkgprefix libdir python)/python${pyver}/site-packages"
	fi
fi
