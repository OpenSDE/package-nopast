# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../kdelibs/kdelibs.conf
# Copyright (C) 2007 - 2009 The OpenSDE Project
# Copyright (C) 2004 - 2006 The T2 SDE Project
# Copyright (C) 1998 - 2004 Clifford Wolf
#
# More information can be found in the files COPYING and README.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- SDE-COPYRIGHT-NOTE-END ---

if [ "$SDECFG_PKG_KDE_APIDOX" ] ; then
	echo_status "KDE library documentation will be generated."
	var_insert makeinstopt " " "apidox"
fi

# If kerberos config is available use it.
if [ -n "$KRB5_CONFIG" ] ; then
	var_append extraconfopt " " "--with-gssapi=yes"
fi

kde_pm() {

	cat > $root/etc/profile.d/kde <<-EOP
KDEDIR=/$prefix
PATH="\$PATH:\$KDEDIR/bin"
MANPATH="\$MANPATH:\$KDEDIR/man"
export KDEDIR PATH MANPATH

export XDG_CONFIG_DIRS="\$XDG_CONFIG_DIRS\${XDG_CONFIG_DIRS:+:}$sysconfdir/xdg"
export XDG_DATA_DIRS="\$XDG_DATA_DIRS\${XDG_DATA_DIRS:+:}$datadir"
export G_SLICE=always-malloc
EOP

}

hook_add postmake 3 kde_pm

