# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../coreutils/install.patch
# Copyright (C) 2010 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- SDE-COPYRIGHT-NOTE-END ---

Use install instead of ./ginstall for installing at native build stages

When not cross-compiling the just-built ./ginstall is called for installing
the binaries. Because this circumvents the OpenSDE install wrapper, defined
install wrapper filters will not have any effect in "native" build stages.
The coreutils package is heavily relying on install wrapper filters for
changing the install location of certain binaries from '/usr/bin' to '/bin'
to be FHS compliant.
Without this fix those binaries will get installed at both locations,
because on cross-stage the filter is working properly.

--- coreutils-7.4/src/Makefile.in.orig	2010-03-31 19:31:40.000000000 +0200
+++ coreutils-7.4/src/Makefile.in	2010-03-31 19:34:19.000000000 +0200
@@ -1627,7 +1627,7 @@
 # translation inhibits printing of UTF-8 names, just skip this test.
 au_dotdot = authors-dotdot
 au_actual = authors-actual
-@CROSS_COMPILING_FALSE@cu_install_program = ./ginstall
+@CROSS_COMPILING_FALSE@cu_install_program = install
 
 # Use the just-built ./ginstall, when not cross-compiling.
 @CROSS_COMPILING_TRUE@cu_install_program = @INSTALL_PROGRAM@
