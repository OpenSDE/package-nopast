# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# Filename: package/.../uclibc/filter_before_install.ing.patch
# Copyright (C) 2006 The OpenSDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- SDE-COPYRIGHT-NOTE-END ---

--- ./Makefile.in.orig	2006-11-29 22:29:11.000000000 -0300
+++ ./Makefile.in	2006-11-29 22:30:50.000000000 -0300
@@ -113,16 +113,8 @@
 
 # Installs header files.
 install_headers:
-	$(INSTALL) -d $(PREFIX)$(DEVEL_PREFIX)include
-	printf ".svn\n.cvsignore\nCVS\n" > tar_exclude ; \
-	if [ "$(KERNEL_SOURCE)" = "$(PREFIX)$(DEVEL_PREFIX)" ] ; then \
-		ls -1d include/linux include/asm* >> tar_exclude ; \
-	fi ; \
-	$(TAR) -chf - -X tar_exclude include \
-		| $(TAR) -xf - -C $(PREFIX)$(DEVEL_PREFIX)
-	rm -f tar_exclude
 	printf '#ifndef _LIBC_INTERNAL_H\n#define _LIBC_INTERNAL_H 1\n#endif\n' > \
-		$(PREFIX)$(DEVEL_PREFIX)include/libc-internal.h
+		include/libc-internal.h
 	$(RM) include/dl-osinfo.h
 	$(RM) include/_lfs_64.h
 	$(RM) include/bits/uClibc_uintmaxtostr.h
@@ -199,10 +191,14 @@
 	# Remove this as it is only used internally.
 	$(RM) include/tls.h
 endif
-	-@for i in `find $(PREFIX)$(DEVEL_PREFIX)include -type d` ; do \
-	    chmod 755 $$i; chmod 644 $$i/*.h > /dev/null 2>&1; \
-	done
-	-chown -R `id | sed 's/^uid=\([0-9]*\).*gid=\([0-9]*\).*$$/\1:\2/'` $(PREFIX)$(DEVEL_PREFIX)include
+	$(INSTALL) -d $(PREFIX)$(DEVEL_PREFIX)include
+	printf ".svn\n.cvsignore\nCVS\n" > tar_exclude ; \
+	if [ "$(KERNEL_SOURCE)" = "$(PREFIX)$(DEVEL_PREFIX)" ] ; then \
+		ls -1d include/linux include/asm* >> tar_exclude ; \
+	fi ; \
+	$(TAR) -chf - -X tar_exclude include/* \
+		| $(TAR) -xf - -C $(PREFIX)$(DEVEL_PREFIX)
+	rm -f tar_exclude
 
 # Installs development library links.
 install_dev: install_headers
