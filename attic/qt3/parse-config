# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: package/.../qt3/parse-config
# Copyright (C) 2007 - 2010 The OpenSDE Project
#
# More information can be found in the files COPYING and README.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- SDE-COPYRIGHT-NOTE-END ---

# qt3 resource registry is shared by various pkgs. Remove that
# file from the flist if the pkg is marked to have qt3 plugins.
if hasflag QT3-PLUGIN; then
	if [ "$pkg" != "qt3" ]; then
		flistdel="$flistdel|.*/qt_plugins_3.3rc"
	fi
fi

if pkginstalled -f qt3; then
	if hasflag QT3-QUIRK; then
		echo_warning "Injecting -L and -I to find qt3 as requested."

		pkgprefix -t qt3
		QT3INCDIR=$(pkgprefix -r includedir qt3)
		QT3LIBDIR=$(pkgprefix -r libdir qt3)

		var_append GCC_WRAPPER_APPEND ' ' "-L$QT3LIB"
		var_append CPP_WRAPPER_APPEND ' ' "-L$QT3LIB"
		var_append GCC_WRAPPER_APPEND ' ' "-I$QT3INC"
		var_append CPP_WRAPPER_APPEND ' ' "-I$QT3INC"
	fi
fi
